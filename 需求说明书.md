## 一、需求说明书
### 1. 系统背景
本项目为 Qt 桌面端实现的“欢乐斗地主”卡牌游戏，支持单机模式下的人机对战。游戏围绕发牌、抢地主、出牌、计分与结算等核心流程展开，包含动画与音乐资源以提升体验。

### 2. 系统目标
- 提供完整的斗地主一局流程（发牌、抢地主、出牌、结算、重新开局）。
- 支持 1 名用户与 2 名机器人对战，具备基础 AI 决策（抢地主、出牌）。
- 提供直观的图形界面、音效与倒计时提示，保障操作反馈。

### 3. 角色
- **玩家（user）**：真人用户，操作 UI 发起抢地主、出牌或“不要”。
- **机器人（robot）**：左右两名 AI，对应 player::ROOT 类型，自动决策抢地主与出牌。
- **游戏控制器（gamecontrol）**：调度全局状态与信号，负责发牌、轮转、结算与状态通知。

### 4. 功能列表
- **加载与启动**：启动页 `Loadprocess` 显示加载动画，随后进入主界面。
- **发牌/抢地主**：`gamecontrol::SetAllCards` 创建完整牌堆；`StartPrepareLord` 触发叫分信号；`BecomeLord` 确定地主并发放底牌。
- **出牌流程**：`gamecontrol::GamePlayhand` 校验/更新出牌记录、处理“要不起”、驱动下一位玩家决策。
- **AI 决策**：`Strategy` 评估牌力并生成出牌；`robotgetloard`、`robotplayhand` 负责具体 AI 行为。
- **界面呈现**：`Maingame` 渲染背景、卡牌、按钮、倒计时、动画、音效；`CardPanel` 展示单张卡牌与交互。
- **计分与结算**：`GamePlayhand` 完成倍数计算与分数增减，触发 `EndPanel` 结算界面与音效。
- **重新开局**：`Maingame::RePlayGame` 调用 `RetCardDate`/`InitGameScene` 等重置状态，重新发牌。

### 5. 非功能需求
- **性能**：单机桌面应用，需保证动画、发牌、拖拽等操作流畅；倒计时基于 `QTimer`。
- **可用性**：界面固定 1000x650，提供角色/状态标签、音效提示、超时自动出牌。
- **稳定性**：重新开局需清理上一局状态，避免空指针及状态泄漏。

### 6. 约束条件
- 必须使用 Qt（.pro 工程，依赖 Widgets、多媒体、动画模块）。
- 资源文件通过 `res.qrc` 管理，路径受 Qt 资源系统约束。
- 仅单机环境，无网络与数据库。

### 7. 运行环境
- Qt 6（含 Widgets、Multimedia、Core 模块）。
- C++17 编译器（如 MSVC、MinGW、Clang、GCC）。
- 支持 Windows / Linux / macOS 桌面环境。

### 8. 用户需求描述
- 用户能够开始一局游戏，看到发牌动画与倒计时提示。
- 用户可选择抢/不抢地主，系统根据最高叫分判定地主并发底牌。
- 用户可出牌、拖拽选择或点击选择卡牌，若无法压制可选择“不要”。
- 游戏展示机器人手牌张数、出牌区与提示标签（如“要不起”）。
- 结算后用户可查看胜负与得分，并能重新开始下一局。
